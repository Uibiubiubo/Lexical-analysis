# 高级词法分析器可视化演示

## 概述

`advanced_lexer_demo.html` 是一个基于 Web 的交互式词法分析器演示工具，采用学术风格设计，提供直观的可视化界面来展示词法分析的完整过程。该工具完全基于浏览器运行，无需后端服务器支持。

## 功能特性

### 核心功能

1. **完整的词法分析**
   - 支持多种 Token 类型识别
   - 关键字：`int`, `if`, `else`, `while`, `return`, `void`
   - 标识符：变量名、函数名等
   - 数字常量：整数和浮点数（包括科学计数法）
   - 字符串：支持转义字符
   - 运算符：算术、关系、赋值运算符
   - 分隔符：括号、花括号、分号、逗号

2. **高级特性**
   - 浮点数识别（支持科学计数法，如 `1.5e+10`）
   - 字符串字面量解析（支持转义序列）
   - 单行注释（`//`）和多行注释（`/* */`）处理
   - 错误恢复机制
   - 精确的行号和列号跟踪

3. **可视化展示**
   - Token 序列列表视图
   - Token 流可视化（流程图风格）
   - 不同 Token 类型的颜色标识
   - 实时统计信息

4. **数据导出**
   - 支持将 Token 序列导出为 JSON 格式
   - 便于进一步分析和处理

5. **快速示例**
   - 基础语法示例
   - 浮点数示例
   - 字符串示例
   - 错误恢复示例
   - 注释示例

## 使用方法

### 快速开始

1. **打开文件**
   - 使用任意现代浏览器打开 `advanced_lexer_demo.html`
   - 推荐使用 Chrome、Firefox、Edge 或 Safari

2. **输入代码**
   - 在左侧"源代码输入"区域输入或修改代码
   - 也可以点击底部的"快速示例"按钮加载预设代码

3. **开始分析**
   - 点击"开始分析"按钮执行词法分析
   - 页面会自动显示分析结果

4. **查看结果**
   - **Token 序列**：右侧列表显示所有识别的 Token
   - **统计信息**：中间区域显示各类 Token 的数量统计
   - **可视化**：底部显示 Token 流的图形化表示

### 功能详解

#### 1. 源代码编辑器
- 支持多行代码输入
- 可调整编辑区域高度（拖拽底部边缘）
- 默认包含示例代码

#### 2. 操作按钮
- **开始分析**：执行词法分析
- **清空**：清除输入和结果
- **导出JSON**：将 Token 序列保存为 JSON 文件

#### 3. Token 序列显示
每个 Token 显示以下信息：
- **序号**：Token 在序列中的位置
- **类型**：Token 的分类（带颜色标识）
- **值**：Token 的实际内容
- **位置**：行号和列号（格式：L行:C列）

#### 4. 统计信息
实时显示：
- 总 Token 数
- 关键字数量
- 标识符数量
- 数字常量数量
- 错误数量

#### 5. Token 流可视化
- 以流程图形式展示 Token 序列
- 鼠标悬停可查看详细信息
- 支持横向滚动查看长序列

## Token 类型说明

### Token 分类与颜色标识

| Token 类型 | 说明 | 颜色标识 | 示例 |
|-----------|------|---------|------|
| **关键字** | 语言保留字 | 浅蓝色 | `int`, `if`, `while` |
| **标识符** | 用户定义名称 | 浅绿色 | `main`, `count`, `pi` |
| **整数** | 整数常量 | 浅黄色 | `10`, `256`, `0` |
| **浮点数** | 浮点数常量 | 淡黄色 | `3.14`, `1.5e+10` |
| **字符串** | 字符串字面量 | 浅粉色 | `"Hello"`, `"Line\n"` |
| **运算符** | 算术、关系运算符 | 浅紫色 | `+`, `==`, `>=` |
| **分隔符** | 语法分隔符号 | 浅灰色 | `(`, `)`, `;`, `{` |
| **错误** | 非法字符 | 浅红色 | `@`, `#`, `$` |

### 支持的 Token 类型列表

#### 关键字
- `int` - 整型声明
- `if` - 条件判断
- `else` - 条件分支
- `while` - 循环
- `return` - 函数返回
- `void` - 空类型

#### 运算符
- **算术运算符**：`+`, `-`, `*`, `/`
- **关系运算符**：`>`, `<`, `>=`, `<=`, `==`, `!=`
- **赋值运算符**：`=`

#### 分隔符
- **括号**：`(`, `)`
- **花括号**：`{`, `}`
- **其他**：`;`, `,`

## 示例代码

### 示例 1：基础语法
```c
int main() {
    int x = 10;
    int y = 20;
    int sum = x + y;
    return sum;
}
```

### 示例 2：浮点数
```c
float pi = 3.14159;
float e = 2.71828;
float big = 1.5e+10;
float small = 2.5e-3;
```

### 示例 3：字符串
```c
string name = "Alice";
string greeting = "Hello World!";
string escaped = "Line1\nLine2\tTab";
```

### 示例 4：错误恢复
```c
int x = @10;  // @ 是错误字符
int y = #20;  // # 是错误字符
int z = $30;  // $ 是错误字符
int w = 40;   // 正常语句
```

### 示例 5：注释
```c
// 这是单行注释
int x = 10;

/* 这是多行注释
   可以跨越多行
   非常方便 */
int y = 20;
```

## 技术实现

### 前端技术
- **HTML5**：页面结构
- **CSS3**：学术风格样式设计
- **JavaScript (ES6+)**：词法分析逻辑

### 词法分析算法
- 基于正则表达式的模式匹配
- 贪婪匹配策略（最长匹配优先）
- 错误恢复机制（遇到非法字符继续分析）
- 行号和列号精确跟踪

### 浏览器兼容性
- Chrome 60+
- Firefox 60+
- Safari 12+
- Edge 79+

## 设计特点

### 学术风格
- 采用浅蓝色配色方案
- 清晰的边框和分隔线
- Times New Roman 和宋体字体
- 简洁专业的界面布局

### 用户体验
- 响应式布局设计
- 实时交互反馈
- 平滑的动画过渡
- 清晰的视觉层次

## 应用场景

1. **教学演示**
   - 编译原理课程实验
   - 词法分析概念讲解
   - 有限状态自动机演示

2. **学习工具**
   - 理解词法分析过程
   - 观察 Token 识别规则
   - 调试词法分析器

3. **快速原型**
   - 测试词法规则
   - 验证语言设计
   - 生成测试数据

4. **学术报告**
   - 课程作业展示
   - 论文配图工具
   - 实验结果可视化

## 文件结构

```
advanced_lexer_demo.html
├── HTML 结构
│   ├── 页面头部（标题和说明）
│   ├── 源代码输入面板
│   ├── Token 序列显示面板
│   ├── 统计信息面板
│   └── 可视化面板
├── CSS 样式
│   ├── 学术风格配色
│   ├── 布局样式
│   └── Token 类型颜色
└── JavaScript 逻辑
    ├── Token 类型定义
    ├── 词法分析函数
    ├── 可视化渲染
    └── 交互处理
```

## 扩展建议

### 功能增强
1. 添加更多关键字支持
2. 支持更多编程语言
3. 添加语法高亮功能
4. 实现步进式分析
5. 添加状态转换图可视化

### 性能优化
1. 对大文件的分块处理
2. 虚拟滚动优化 Token 列表
3. Web Worker 并行处理

## 常见问题

### Q1: 为什么某些字符显示为错误？
**A**: 词法分析器只识别预定义的字符集。特殊字符（如 `@`, `#`, `$`）不在语言规范中，会被标记为错误。

### Q2: 如何添加自定义关键字？
**A**: 修改 JavaScript 中的 `tokenRules` 数组，在适当位置添加新的模式匹配规则。

### Q3: 导出的 JSON 格式是什么？
**A**: 导出的 JSON 是一个数组，每个元素包含 `type`（类型）、`value`（值）、`line`（行号）、`column`（列号）四个字段。

### Q4: 可以离线使用吗？
**A**: 可以。这是一个独立的 HTML 文件，无需网络连接即可在浏览器中运行。

### Q5: 如何处理中文字符？
**A**: 当前版本主要针对 C 语言语法，标识符规则为字母和下划线开头。如需支持中文，需要修改标识符的正则表达式。

## 许可证

本项目仅用于教育和学习目的。

## 作者信息

- **项目名称**: 高级词法分析器可视化演示
- **版本**: 1.0
- **更新时间**: 2025-11-30

## 相关资源

- [编译原理课程资料](./README_ADVANCED.md)
- [词法分析器核心代码](./advanced_lexer.py)
- [基础版本展示](./词法分析展示.html)
- [任务报告](./词法分析任务报告.html)


---

**提示**: 建议使用最新版本的现代浏览器以获得最佳体验。

